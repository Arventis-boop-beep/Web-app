# Доступные HTTP‑запросы к приложению

---

## 1. Получить список всех пользователей  
**Метод:** `GET`  
**URL:** `/api/users`

| Параметр | Обязат. | Описание | Возможные значения | По умолчанию |
|----------|---------|----------|--------------------|--------------|
| `db` | нет | Из какой СУБД брать данные | `sqlite` | `postgres` | `mysql` | `both` | `sqlite` |

**Пример запроса**  
```
http://localhost:5000/api/users?db=mysql
```

---

## 2. Получить информацию о конкретном пользователе  
**Метод:** `GET`  
**URL:** `/api/users/<login>`

| Параметр | Обязат. | Описание | Возможные значения | По умолчанию |
|----------|---------|----------|--------------------|--------------|
| `db` | нет | Из какой СУБД брать данные | `sqlite` | `postgres` | `mysql` | `both` | `sqlite` |

**Пример**  
```bash
curl "http://localhost:5000/api/users/alice?db=postgres"
```

---

## 3. Создать нового пользователя  
**Метод:** `POST`  
**URL:** `/api/users`

### Тело запроса (JSON)
```json
{
  "login": "newuser",
  "password": "Password123!",
  "db": "both"
}
```

| Поле | Обязат. | Описание | Допустимые значения |
|------|---------|----------|---------------------|
| `login` | да | Логин нового пользователя | строка |
| `password` | да | Пароль (будет захеширован) | строка |
| `db` | нет | В какую СУБД записать | `sqlite` | `postgres` | `mysql` | `both` |

**CLI‑пример (PostgreSQL)**  
```sql
INSERT INTO users (login, password)
VALUES ('bob', crypt('Password123!', gen_salt('bf')));
```

---

## 4. Удалить пользователя  
**Метод:** `DELETE`  
**URL:** `/api/users/<login>`

| Параметр | Обязат. | Описание | Возможные значения | По умолчанию |
|----------|---------|----------|--------------------|--------------|
| `db` | нет | Из какой СУБД удалить | `sqlite` | `postgres` | `mysql` | `both` | `sqlite` |

**CLI‑пример (MySQL)**  
```sql
DELETE FROM users WHERE login = 'bob';
```

---

## Общие заметки

1. **СУБД по умолчанию — SQLite.**  
   Если параметр `db` не указан, операция выполняется только над файлом `database.db`.

2. **Режим `both`** выполняет действие сразу во всех трёх базах (SQLite, PostgreSQL, MySQL).

3. **Пароли** хранятся в виде хешей `bcrypt`; открытый текст в БД не попадает.

4. **Кодировка** всех подключённых СУБД — `UTF8`, поэтому кириллица поддерживается без дополнительных настроек.

5. Примеры SQL‑команд даны для справки; в рабочем процессе предпочтительнее обращаться к API через HTTP‑клиенты (`curl`, Postman и т. д.).
